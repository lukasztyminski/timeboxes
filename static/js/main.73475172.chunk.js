(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,n){e.exports=n(296)},180:function(e,t){},182:function(e,t){},196:function(e,t){},198:function(e,t){},226:function(e,t){},228:function(e,t){},229:function(e,t){},234:function(e,t){},236:function(e,t){},242:function(e,t){},244:function(e,t){},263:function(e,t){},275:function(e,t){},278:function(e,t){},295:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(41),i=n.n(o),u=n(26),c=n(143),l=n(7),s=n(144),m=n(18),d=n(8),f=n.n(d),b=n(19),p=n(145),E=n.n(p).a.create({baseURL:"http://localhost:4000"});E.interceptors.request.use(function(e){var t=localStorage.getItem("accessToken");return e.headers.contentType="application/json",t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return Promise.reject(e)});var v=E,h={getAllTimeboxes:function(){var e=Object(b.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.get("/timeboxes");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),addTimebox:function(){var e=Object(b.a)(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/timeboxes",t);case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),getTimeboxesByFullTextSearch:function(){var e=Object(b.a)(f.a.mark(function e(t,n){var r,a,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t&&t.length>0)){e.next=10;break}return r=encodeURIComponent(t),e.next=5,v.get("".concat("/timeboxes","/?q=").concat(r));case 5:return a=e.sent,o=a.data,e.abrupt("return",o);case 10:this.getAllTimeboxes();case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),new Error(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t,n){return e.apply(this,arguments)}}(),partiallyUpdateTimebox:function(){var e=Object(b.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.id){e.next=3;break}throw new Error("Timebox has to have an id to be updated");case 3:return e.next=5,v.patch("".concat("/timeboxes","/").concat(t.id),t);case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),removeTimebox:function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.id){e.next=3;break}throw new Error("Timebox has to have an id to be updated");case 3:return e.next=5,v.delete("".concat("/timeboxes","/").concat(t.id));case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(b.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.post("/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},T=Object(r.createContext)({accessToken:null,onLogout:function(){},onLoginAttempt:function(){}}),x=n(42),g=n(43),O=n(45),I=n(44),j=n(27),y=n(46),w=n(149),k=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"LOADING_INDICATOR_DISABLE":return!1;default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOX_EDIT_START":return t.currentlyEditedTimeboxId;case"TIMEBOX_EDIT_STOP":return null;default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOX_MAKE_CURRENT":return t.timebox.id;case"TIMEBOX_REMOVE":return e===t.removedTimebox.id?null:e;default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_SET":return t.timeboxesLoadingError;default:return e}},_=n(148),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMEBOXES_SET":return t.timeboxes;case"TIMEBOX_ADD":var n=t.timebox;return[].concat(Object(_.a)(e),[n]);case"TIMEBOX_REMOVE":var r=t.removedTimebox;return e.filter(function(e){return e.id!==r.id});case"TIMEBOX_REPLACE":var a=t.replacedTimebox;return e.map(function(e){return e.id===a.id?a:e});default:return e}},D=Object(u.combineReducers)({currentTimeboxId:S,timeboxes:R,currentlyEditedTimeboxId:C,areLoadingTimeboxes:k,timeboxesLoadingError:M}),L=function(e){return function(e){return e}(e.timeboxes)},A=function(e){return function(e){return e.filter(function(t){return t.id!==e.currentTimeboxId})}(e.timeboxes)},N=function(e,t){return function(e,t){return e.find(function(e){return e.id===t})}(e.timeboxes,t)},B=function(e){return function(e){return e}(e.areLoadingTimeboxes)},F=function(e){return function(e){return e}(e.timeboxesLoadingError)},P=function(e,t){return function(e){return e}(e.currentlyEditedTimeboxId&&e.currentlyEditedTimeboxId===t.id)},X=function(e){return function(e){return e}(!!e.currentTimeboxId)},z=function(e){return X(e)?N(e,e.currentTimeboxId):null},U=function(e){return{type:"TIMEBOX_REMOVE",removedTimebox:e}};var V=function(e){var t=e.className,n=void 0===t?"":t,r=e.minutes,o=void 0===r?20:r,i=e.seconds,u=void 0===i?48:i;return a.a.createElement("h2",{className:"Clock "+n},"Pozosta\u0142o ",o,":",u)},W=n(146),q=n.n(W);var Z=function(e){var t=e.className,n=void 0===t?"":t,r=e.percent,o=void 0===r?33:r,i=e.big,u=void 0!==i&&i,c=e.color,l=void 0===c?null:c,s=q()("progress",n,{"progress--big":u,"progress--color-red":"red"===l});return a.a.createElement("div",{className:s},a.a.createElement("div",{className:"progress__bar",style:{width:"".concat(o,"%")}}))},J=function(e){function t(e){var n;return Object(x.a)(this,t),(n=Object(O.a)(this,Object(I.a)(t).call(this,e))).state={isRunning:!1,isPaused:!1,isFinished:!1,pausesCount:0,elapsedTimeInSeconds:0},n.handleStart=n.handleStart.bind(Object(j.a)(n)),n.handleStop=n.handleStop.bind(Object(j.a)(n)),n.togglePause=n.togglePause.bind(Object(j.a)(n)),n.intervalId=null,n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidUpdate",value:function(e,t){!t.isFinished&&this.state.isFinished&&this.props.onFinish()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"handleStart",value:function(e){this.setState({isRunning:!0}),this.startTimer()}},{key:"handleStop",value:function(e){this.setState({isRunning:!1,isPaused:!1,pausesCount:0,elapsedTimeInSeconds:0}),this.stopTimer()}},{key:"startTimer",value:function(){var e=this;null===this.intervalId&&(this.intervalId=window.setInterval(function(){e.setState(function(t){var n=60*e.props.totalTimeInMinutes,r=Math.min(t.elapsedTimeInSeconds+.1,n),a=t.isFinished||r>=n;return a&&e.stopTimer(),{elapsedTimeInSeconds:r,isFinished:a,isRunning:t.isRunning&&!a,isPaused:t.isPaused&&!a}})},100))}},{key:"stopTimer",value:function(){window.clearInterval(this.intervalId),this.intervalId=null}},{key:"togglePause",value:function(){this.setState(function(e){var t=!e.isPaused;return t?this.stopTimer():this.startTimer(),{isPaused:t,pausesCount:t?e.pausesCount+1:e.pausesCount}})}},{key:"render",value:function(){var e,t=this.state,n=t.isPaused,r=t.isFinished,o=t.isRunning,i=t.pausesCount,u=t.elapsedTimeInSeconds,c=this.props,l=c.title,s=60*c.totalTimeInMinutes,d=(e=s-u,[Math.floor(e/60),Math.floor(e%60)]),f=Object(m.a)(d,2),b=f[0],p=f[1],E=u/s*100;return a.a.createElement("div",{className:"CurrentTimebox"},a.a.createElement("h1",null,l),a.a.createElement(V,{minutes:b,seconds:p,className:n?"inactive":""}),a.a.createElement(Z,{percent:E,className:n?"inactive":"",color:"red",big:!0}),a.a.createElement("button",{onClick:this.handleStart,disabled:o||r},"Start"),a.a.createElement("button",{onClick:this.handleStop,disabled:!o},"Stop"),a.a.createElement("button",{onClick:this.togglePause,disabled:!o},n?"Wzn\xf3w":"Pauzuj"),"Liczba przerw: ",i)}}]),t}(a.a.Component),G=Object(l.b)(function(e){return{currentTimebox:z(e)}},function(e,t){return{onFinish:function(){return e(function(e,t){return X(t())&&e(U(z(t()))),{type:"CURRENT_TIMEBOX_FINISH"}})}}})(function(e){var t=e.currentTimebox,n=e.onFinish;if(t){var r=t.title,o=t.totalTimeInMinutes;return a.a.createElement(J,{onFinish:n,title:r,totalTimeInMinutes:o})}return null}),H=n(147),K=n.n(H),Q=function(e){return K.a.decode(e).email},Y=function(){var e=Object(r.useContext)(T).accessToken;return a.a.createElement(a.a.Fragment,null,"Witaj ",a.a.createElement("strong",null," ",e?Q(e):null))},$=function(e){var t=e.children,n=Object(r.useContext)(T).onLogout;if(r.Children.count(t)<1)throw new Error("Header has to have at least one child!");return a.a.createElement("div",{className:"header"},a.a.createElement(Y,null),a.a.createElement("a",{className:"header__logout-link",href:"#logout",onClick:n},t))},ee=function(e){var t=e.text,n=e.author;return a.a.createElement("figure",null,a.a.createElement("blockquote",null,t),a.a.createElement("figcaption",null,a.a.createElement("cite",null,n)))},te=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),o=t[0],i=t[1];Object(r.useEffect)(function(){n.e(3).then(n.t.bind(null,298,7)).then(function(e){i(e.getQuote())}).catch(function(){return console.log("Couldn`t load quotes")})},[o]);return function(){if(o){var e=o.author,t=o.text;return a.a.createElement(ee,{author:e,text:t})}return"..."}()},ne=function(e){var t=e.onCreate,n=Object(r.useRef)(),o=Object(r.useRef)();return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:n.current.value,totalTimeInMinutes:o.current.value}),n.current.value="",o.current.value=""},className:"TimeboxCreator"},a.a.createElement("label",null,"Co robisz?",a.a.createElement("input",{ref:n,type:"text"})),a.a.createElement("br",null),a.a.createElement("label",null,"Ile minut?",a.a.createElement("input",{step:"0.01",ref:o,type:"number"})),a.a.createElement("br",null),a.a.createElement("button",null,"Dodaj timebox"))},re=function(e){var t=e.timeboxes,n=e.renderTimebox;return a.a.createElement("div",{className:"TimeboxesList"},t.map(n))},ae=(Object(l.b)(function(e){return{timeboxes:L(e)}})(re),Object(l.b)(function(e){return{timeboxes:A(e)}})(re));var oe=function(e){var t=e.title,n=e.totalTimeInMinutes,r=e.onDelete,o=e.onEdit,i=e.onMakeCurrent;return a.a.createElement("div",{className:"Timebox"},a.a.createElement("h3",null,t," - ",n," min."),a.a.createElement("button",{onClick:r},"Usu\u0144"),a.a.createElement("button",{onClick:o},"Zmie\u0144"),a.a.createElement("button",{onClick:i},"Zacznij teraz"))},ie=function(e){var t=e.onUpdate,n=e.initialTitle,o=e.initialTotalTimeInMinutes,i=e.onCancel,u=Object(r.useRef)(),c=Object(r.useRef)(),l=function(){u.current.value=n,c.current.value=o};return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:u.current.value,totalTimeInMinutes:c.current.value}),l()},className:"TimeboxEditor"},a.a.createElement("label",null,"Co robisz?",a.a.createElement("input",{ref:u,defaultValue:n,type:"text"})),a.a.createElement("br",null),a.a.createElement("label",null,"Ile minut?",a.a.createElement("input",{ref:c,defaultValue:o,type:"number",step:"0.01"})),a.a.createElement("br",null),a.a.createElement("a",{href:"#cancel",onClick:function(){l(),i()}},"Anuluj"),a.a.createElement("button",null,"Zapisz zmiany"))},ue=Object(l.b)(function(e,t){return{isEdited:P(e,t.timebox)}},function(e,t){return{onEdit:function(){e({type:"TIMEBOX_EDIT_START",currentlyEditedTimeboxId:t.timebox.id})},onCancel:function(){return e({type:"TIMEBOX_EDIT_STOP"})},onMakeCurrent:function(){return e({type:"TIMEBOX_MAKE_CURRENT",timebox:t.timebox})}}})(function(e){var t=e.timebox,n=e.isEdited,r=e.onCancel,o=e.onUpdate,i=e.onEdit,u=e.onDelete,c=e.onMakeCurrent;return a.a.createElement(a.a.Fragment,null,n?a.a.createElement(ie,{initialTitle:t.title,initialTotalTimeInMinutes:t.totalTimeInMinutes,onCancel:r,onUpdate:o}):a.a.createElement(oe,{key:t.id,title:t.title,totalTimeInMinutes:t.totalTimeInMinutes,onDelete:u,onEdit:i,onMakeCurrent:c}))}),ce=function(){var e=Object(l.c)(),t=Object(l.d)(B),n=Object(l.d)(F);Object(r.useEffect)(function(){e(function(e){h.getAllTimeboxes().then(function(t){e(function(e){return{type:"TIMEBOXES_SET",timeboxes:e}}(t))}).catch(function(t){return e(function(e){return{type:"ERROR_SET",timeboxesLoadingError:e}}(t))}).finally(function(){return e({type:"LOADING_INDICATOR_DISABLE"})})})},[e]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(ne,{onCreate:function(t){return e(function(e){return function(t){try{h.addTimebox(e).then(function(e){return t({type:"TIMEBOX_ADD",timebox:e})})}catch(n){console.log("Jest b\u0142\u0105d przy tworzeniu timeboxa:",n)}}}(t))}}),t?"Timeboxes is loading...":null,n?"Failed to load...":null,a.a.createElement(ae,{renderTimebox:function(t){return a.a.createElement(ue,{timebox:t,onDelete:function(){return e(function(e){return function(t){h.removeTimebox(e).then(function(){return t(U(e))})}}(t))},onUpdate:function(n){return e(function(e,t){return function(n){var r=Object(w.a)({},e,t);h.partiallyUpdateTimebox(r).then(function(e){return n(function(e){return{type:"TIMEBOX_REPLACE",replacedTimebox:e}}(e))}),n({type:"TIMEBOX_EDIT_STOP"})}}(t,n))}})}}))},le=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement($,{children:"Logout"}),a.a.createElement(ce,null),a.a.createElement(G,null),a.a.createElement(te,null))},se=function(e){function t(){var e,n;Object(x.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log("Wyst\u0105pi\u0142 nast\u0119puj\u0105cy b\u0142\u0105d:",e,t)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.children;return this.state.hasError?t:n}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.a.Component),me=function(e){var t=e.errorMessage,n=Object(r.useRef)(),o=Object(r.useRef)(),i=Object(r.useContext)(T).onLoginAttempt;return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i({email:n.current.value,password:o.current.value}),n.current.value="",o.current.value=""},className:"LoginForm"},t?a.a.createElement("div",{className:"LoginForm__error-message"},t):null,a.a.createElement("label",null,"Login",a.a.createElement("input",{ref:n,type:"text",defaultValue:"lttyminski@gmail.com"})),a.a.createElement("br",null),a.a.createElement("label",null,"Password",a.a.createElement("input",{ref:o,type:"password",defaultValue:"podlasieAZS1916"})),a.a.createElement("br",null),a.a.createElement("button",null,"Log in"))},de=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),u=Object(m.a)(i,2),c=u[0],l=u[1];Object(r.useEffect)(function(){var e=localStorage.getItem("accessToken");e&&o(e)},[n]);return a.a.createElement("div",{className:"App"},a.a.createElement(se,{message:"Co\u015b nie dzia\u0142a w ca\u0142ej aplikacji"},a.a.createElement(T.Provider,{value:{accessToken:n,onLogout:function(){o(null),l(!1),localStorage.removeItem("accessToken")},onLoginAttempt:function(e){h.login(e).then(function(e){var t=e.accessToken;o(t),l(!1),localStorage.setItem("accessToken",t)}).catch(function(){return l(!0)})}}},n?a.a.createElement(le,null):a.a.createElement(me,{errorMessage:c?"Failed to log in":null}))))};n(295);n.d(t,"StoreContext",function(){return fe});var fe=Object(r.createContext)({store:null}),be=Object(u.createStore)(D,Object(s.composeWithDevTools)(Object(u.applyMiddleware)(c.a)));i.a.render(a.a.createElement(l.a,{store:be},a.a.createElement(de,null)),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.73475172.chunk.js.map